<!DOCTYPE html>
<html>
    <head>
        <title>Shared Memo</title>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width"/>
        <script src="webxdc.js"></script>
        <style type="text/css">
            body {
                font-family: Helvetica, Arial, sans-serif;
                background-color: #ECDD09;
            }
        </style>
    </head>
    <body>
        <h1>Shared Memo</h1>
         
        <form>
        <br>
           <input type="submit" id="updateButton" onclick="sendMsg(); return false;" value="   Update Memo  " /><br><br>
            <textarea id="input" name="textfeld_01" rows="20" cols="300" wrap="soft" style="max-width: calc(100% - 7px);" autofocus="true" oninput=activateButton() ></textarea>
        </form>
        <p id="output"></p>   
        <p><em><small id="deviceName"></small></em></p>
        <script>
        // handle past and future state updates
        window.webxdc.setUpdateListener(function (update) {
            document.getElementById('input').innerHTML = update.payload.msg;
         });
        	  
		  document.getElementById("updateButton").disabled = true // disable UpdateButton until the user changed the textarea
		  document.getElementById('output').innerHTML = ""	
		  
        function activateButton() {
        
            document.getElementById("updateButton").disabled = false
        		document.getElementById('output').innerHTML = ""	
        }

        function sendMsg() {
           
        	document.getElementById("updateButton").disabled = true
        	document.getElementById("updateButton").value="   Update was sent   "
        	sender = document.getElementById("")
        	msg = document.getElementById("input").value;
            	info = ' Memo was updated by '+window.webxdc.selfName;
            	document.getElementById("input").value = msg; //dont clear the textarea

            // send new updates
            window.webxdc.sendUpdate({
                payload: {
                    name: window.webxdc.selfName,
                    msg,
                },
                info,
            }, info);
        }
        </script>  
    </body>
</html>
    </body>
</html>
